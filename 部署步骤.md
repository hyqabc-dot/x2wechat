# 🚀 GitHub Actions 部署步骤

## 第1步：创建GitHub仓库

1. 访问 https://github.com
2. 点击右上角绿色 "New" 按钮
3. 填写仓库信息：
   - **Repository name**: `x2wechat`
   - **Description**: `X to WeChat monitor tool`
   - ✅ 选择 **Public** (免费额度更多)
   - ✅ 勾选 **Add a README file**
4. 点击 **Create repository**

## 第2步：上传所有文件

### 方法A：Web界面上传（推荐）
1. 在刚创建的仓库页面，点击 **uploading an existing file**
2. 将以下所有文件拖拽到页面上：
   ```
   x2wechat.py
   config_github.json
   state.json
   .gitignore
   README.md
   ```
3. **重要**：创建工作流文件
   - 点击 **Create new file**
   - 文件名输入：`.github/workflows/x2wechat.yml`
   - 复制粘贴工作流内容（见下方）

### 方法B：Git命令行
```bash
git clone https://github.com/YOUR_USERNAME/x2wechat.git
cd x2wechat
# 复制所有文件到此目录
git add .
git commit -m "Add X2WeChat monitoring tool"
git push
```

## 第3步：创建工作流文件

在仓库中创建文件 `.github/workflows/x2wechat.yml`，内容如下：

```yaml
name: X to WeChat Monitor

on:
  schedule:
    - cron: '*/10 * * * *'  # 每10分钟运行
  workflow_dispatch:        # 允许手动触发

jobs:
  monitor:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Run X2WeChat
      env:
        SERVERCHAN_SENDKEY: ${{ secrets.SERVERCHAN_SENDKEY }}
      run: python x2wechat.py --once

    - name: Commit state changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add state.json
        git diff --staged --quiet || git commit -m "Update state [skip ci]"
        git push
```

## 第4步：设置Secret密钥

1. 进入仓库的 **Settings** 页面
2. 左侧菜单找到 **Secrets and variables** → **Actions**
3. 点击 **New repository secret**
4. 添加密钥：
   - **Name**: `SERVERCHAN_SENDKEY`
   - **Value**: `SCT296119Trs8CukmaX2Fvu4hF2RtVr9AR`
5. 点击 **Add secret**

## 第5步：启用GitHub Actions

1. 进入仓库的 **Actions** 页面
2. 如果提示需要启用，点击：**"I understand my workflows, go ahead and enable them"**

## 第6步：测试运行

1. 在 **Actions** 页面，点击 **"X to WeChat Monitor"**
2. 点击右侧 **"Run workflow"** → **"Run workflow"**
3. 等待几分钟，查看运行结果
4. 如果显示绿色✅，说明部署成功

## 🎯 验证部署成功

### 检查工作流
- Actions页面应该显示绿色✅
- 点击具体的运行记录，查看详细日志
- 应该看到类似：`[info] No items fetched for @elonmusk`

### 检查自动更新
- `state.json` 文件的时间戳会自动更新
- 每次运行后会自动commit状态变化

### 测试推送
- 一旦监控的用户发新推文，您会立即收到微信推送
- 推送内容包含中文翻译和原文对照

## 🔧 日常使用

- **自动运行**: 每10分钟自动检查，无需人工干预
- **手动触发**: 在Actions页面随时手动运行测试
- **查看日志**: 点击Actions中的运行记录查看详细信息
- **修改用户**: 编辑 `config_github.json` 文件添加/删除监控用户

## 💰 费用说明

- **公开仓库**: 完全免费，无限制
- **私有仓库**: 每月2000分钟免费额度
- **此工具用量**: 约每月500分钟，在免费范围内

---

**🎉 完成以上步骤后，您的X推文监控工具就会在GitHub云端24小时自动运行了！**

遇到问题可以查看Actions运行日志进行故障排除。